<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Admin - Diccionario AR</title>
  <link rel="icon" href="favicon-ar.png" type="image/png" />
  <link rel="stylesheet" href="css/admin.css" />
</head>
<body>
  <!-- Bot√≥n modo claro/oscuro -->
  <button id="toggle-modo" onclick="toggleModo()" title="Cambiar modo claro/oscuro"></button>

 <!-- LOGIN: tarjeta moderna con Sparkie -->
 <div class="login-card">
  <div class="avatar-sparkie"><img src="img/sparkie.png" alt="Sparkie avatar"></div>
  
  <input type="text" value="administrador" disabled>
  <input type="password" id="clave" placeholder="Ingrese la contrase√±a" aria-label="Campo para contrase√±a">
  <div class="botones">
    <button onclick="verificarClave()">Ingresar</button>
    <button onclick="toggleClave()">Mostrar</button>
  </div>
  <button onclick="location.href='index.html'" class="regresar">Regresar a Diccionario</button>
</div>
  </div>

  <!-- PANEL ADMIN oculto hasta iniciar sesi√≥n -->
  

  <div class="contenedor" id="adminPanel" style="display: none;">
  <h1><span class="azul">PANEL</span> <span class="rojo">ADMIN</span></h1>
    <div style="display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap;">
      <button id="btnCerrarSesion" onclick="cerrarSesion()" style="display:none; background-color:#e74c3c;">Cerrar sesi√≥n</button>
      <button onclick="window.location.href='index.html'">Volver al inicio</button>
    </div>

    <input type="text" id="buscador" placeholder="Buscar por t√©rmino..." onkeyup="filtrarTabla()" aria-label="Buscar t√©rmino" />

    <div style="overflow-x: auto;">
      <table id="tablaTerminos">
        <thead>
          <tr>
            <th>ID</th>
            <th>T√©rmino</th>
            <th>Traducci√≥n</th>
            <th>Pronunciaci√≥n</th>
            <th>Categor√≠a</th>
            <th>Definici√≥n</th>
            <th>Sin√≥nimos</th>
            <th>Tipo</th>
            <th>Forma farmac√©utica</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="10">Cargando t√©rminos...</td></tr>
        </tbody>
      </table>
    </div>

    <div id="paginacion" style="text-align:center; margin-top:20px;"></div>
  </div>

  <!-- Bot√≥n fijo para sugerencias -->
  <button id="btnSugerencias" class="btn-fijo-sugerencias" style="display:none;" onclick="window.location.href='revisar-sugerencias.html'">
    üì¨ Ver sugerencias
  </button>

  <!-- JS principal -->
  <script src="js/admin.js">
    function toggleClave() {
      const input = document.getElementById("clave");
      const esPassword = input.type === "password";
      input.type = esPassword ? "text" : "password";
    }
</script>

  <!-- Modo claro/oscuro y cambio de logo -->
  <script>
    function toggleModo() {
      const esClaro = document.body.classList.toggle("light-mode");
      localStorage.setItem("modoClaro", esClaro ? "1" : "0");
    }

    document.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("modoClaro") === "1") {
        document.body.classList.add("light-mode");
      }
    });
  
    function toggleClave() {
      const input = document.getElementById("clave");
      const esPassword = input.type === "password";
      input.type = esPassword ? "text" : "password";
    }
</script>
<script>
  async function hashClave(texto) {
    const encoder = new TextEncoder();
    const data = encoder.encode(texto);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');
  }

  function verificarClave() {
    const clave = document.getElementById("clave").value;
    const claveHash = "e176a4d6700f098d168d271fd4edd0c9363fb3cd4b89c03620cd297690750618"; // SHA-256 ejemplo

    hashClave(clave).then(hash => {
      if (hash === claveHash) {
        document.querySelector(".login-card").style.display = "none";
        document.querySelector("h1").style.display = "block";
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("btnCerrarSesion").style.display = "inline-block";
        document.getElementById("btnSugerencias").style.display = "inline-block";
      } else {
        alert("‚ùå Contrase√±a incorrecta.");
      }
    });
  }

  // Activar login con Enter
  document.addEventListener("DOMContentLoaded", () => {
    const claveInput = document.getElementById("clave");
    if (claveInput) {
      claveInput.addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
          verificarClave();
        }
      });
    }
  });
</script>
</body>
</html>